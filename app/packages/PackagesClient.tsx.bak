"use client";

import React, { useEffect, useState } from "react";
import Link from "next/link";

/* ---------- Data ---------- */
const PACKAGES_LIST = [
  {
    slug: "ayodhya",
    title: "Varanasi → Ayodhya Taxi",
    short: "Reliable intercity taxi with fixed price and driver guide.",
    starting: "₹1,850 (4 pax)",
    images: ["/images/ayodhya1.jpg", "/images/ayodhya2.jpg"],
    badge: "Popular",
  },
  {
    slug: "kashi-darshan",
    title: "Local Darshan - Kashi Vishwanath",
    short: "Temple darshan + guided walk and Ganga Aarti experience.",
    starting: "₹3,800 (4 pax)",
    images: ["/images/kashi1.jpg", "/images/kashi2.jpg"],
    badge: "Top Rated",
  },
  {
    slug: "lucknow-airport",
    title: "Airport Pickup/Drop",
    short: "Comfortable sedan / Innova with flight tracking options.",
    starting: "₹699 (Pickup)",
    images: ["/images/airport.jpg"],
  },
  {
    slug: "prayagraj",
    title: "Varanasi → Prayagraj (Sangam)",
    short: "Day trip or overnight packages with optional hotel add-ons.",
    starting: "₹2,900 (4 pax)",
    images: ["/images/prayagraj1.jpg", "/images/prayagraj2.jpg"],
  },
  {
    slug: "ganga-aarti",
    title: "Evening Ganga Aarti Special",
    short: "Front-row aarti experience with priest and photography.",
    starting: "₹1,599 (per person)",
    images: ["/images/arti1.jpg", "/images/arti2.jpg"],
  },
  {
    slug: "self-drive",
    title: "Self-Drive Cars (Varanasi)",
    short: "Flexible self-drive cars with easy pickup/drop.",
    starting: "₹1,850 / day",
    images: ["/images/selfdrive1.jpg"],
  },
];

/* ---------- Styles ---------- */
const styles = {
  page: {
    fontFamily: "'Poppins', system-ui, Arial",
    color: "#16323b",
    background: "linear-gradient(180deg,#fffdfa 0%, #fef8f3 50%, #fffdfa 100%)",
    minHeight: "100vh",
  },
  hero: {
    textAlign: "center" as const,
    padding: "48px 20px 28px",
  },
  heroH1: {
    fontSize: "42px",
    fontWeight: 800,
    margin: 0,
    background: "linear-gradient(90deg,#f97316,#fb7185)",
    WebkitBackgroundClip: "text",
    color: "transparent",
  },
  underline: {
    height: 6,
    width: 180,
    margin: "14px auto 0",
    borderRadius: 4,
    background: "linear-gradient(90deg,#fb923c,#f97316)",
  },
  heroTagline: {
    marginTop: 14,
    color: "#6b7b7f",
    fontSize: 16,
    fontStyle: "italic",
  },
  heroCtaRow: {
    marginTop: 20,
    display: "flex",
    justifyContent: "center",
    gap: 14,
  },
  ctaPrimary: {
    background: "linear-gradient(90deg,#fb923c,#f97316)",
    color: "#fff",
    border: "none",
    padding: "12px 20px",
    borderRadius: 10,
    fontWeight: 700,
    cursor: "pointer",
    boxShadow: "0 6px 18px rgba(249,115,22,0.3)",
    transition: "transform 0.2s, box-shadow 0.2s",
  },
  ctaSecondary: {
    background: "#fff",
    border: "2px solid #fb923c",
    padding: "12px 20px",
    borderRadius: 10,
    fontWeight: 700,
    cursor: "pointer",
    transition: "transform 0.2s, box-shadow 0.2s",
  },
  container: { maxWidth: 1100, margin: "26px auto", padding: "12px 20px 60px" },

  card: {
    display: "flex",
    alignItems: "center",
    gap: 20,
    padding: 18,
    borderRadius: 16,
    marginBottom: 20,
    background: "#fff",
    boxShadow: "0 8px 24px rgba(0,0,0,0.05)",
    border: "1px solid rgba(0,0,0,0.05)",
    transition: "all 0.3s ease",
  } as React.CSSProperties,
  cardHover: {
    transform: "translateY(-6px)",
    boxShadow: "0 16px 40px rgba(0,0,0,0.12)",
    border: "1px solid rgba(251,146,60,0.6)",
  },

  thumbWrap: {
    width: 150,
    minWidth: 130,
    height: 100,
    borderRadius: 14,
    overflow: "hidden",
    position: "relative" as const,
    flexShrink: 0,
    background: "#eee",
  },
  thumbImg: {
    width: "100%",
    height: "100%",
    objectFit: "cover" as const,
    transition: "transform 0.6s ease, opacity 0.6s ease",
    display: "block",
  },

  content: { flex: 1 },
  title: { fontSize: 18, margin: 0, fontWeight: 700, color: "#16323b" },
  desc: { marginTop: 6, color: "#566668", fontSize: 14 },
  footerRow: { marginTop: 10, display: "flex", justifyContent: "space-between", alignItems: "center" },
  price: { color: "#e11d48", fontWeight: 700 },
  view: { color: "#fb8b20", fontWeight: 700, fontSize: 14 },

  badge: {
    position: "absolute" as const,
    top: 8,
    left: 8,
    background: "linear-gradient(90deg,#fb923c,#fb7185)",
    color: "#fff",
    padding: "4px 10px",
    borderRadius: 20,
    fontSize: 11,
    fontWeight: 700,
    boxShadow: "0 4px 12px rgba(251,145,120,0.25)",
  },
};

/* ---------- Card component ---------- */
function PackageCard({ pkg }: any) {
  const [imgIndex, setImgIndex] = useState(0);
  const [hover, setHover] = useState(false);

  useEffect(() => {
    if (!pkg.images || pkg.images.length < 2) return;
    const t = setInterval(() => setImgIndex((p: number) => (p + 1) % pkg.images.length), 4000);
    return () => clearInterval(t);
  }, [pkg.images]);

  return (
    <Link href={`/packages/${pkg.slug}`} style={{ textDecoration: "none" }}>
      <div
        style={{
          ...styles.card,
          ...(hover ? styles.cardHover : {}),
        }}
        onMouseEnter={() => setHover(true)}
        onMouseLeave={() => setHover(false)}
      >
        {pkg.badge ? <div style={styles.badge}>{pkg.badge}</div> : null}

        <div style={styles.thumbWrap}>
          {pkg.images.map((src: string, i: number) => (
            <img
              key={src + i}
              src={src}
              alt={pkg.title + " image"}
              loading="lazy"
              style={{
                ...styles.thumbImg,
                position: "absolute",
                top: 0,
                left: 0,
                opacity: i === imgIndex ? 1 : 0,
                transform: hover && i === imgIndex ? "scale(1.08)" : "scale(1)",
              }}
            />
          ))}
        </div>

        <div style={styles.content}>
          <h3 style={styles.title}>{pkg.title}</h3>
          <p style={styles.desc}>{pkg.short}</p>

          <div style={styles.footerRow}>
            <div style={styles.price}>{pkg.starting}</div>
            <div style={styles.view}>View Details →</div>
          </div>
        </div>
      </div>
    </Link>
  );
}

/* ---------- Page ---------- */
export default function PackagesClient() {
  return (
    <div style={styles.page}>
      <section style={styles.hero}>
        <h1 style={styles.heroH1}>Explore Our Packages</h1>
        <div style={styles.underline}></div>
        <div style={styles.heroTagline}>
          Handpicked Varanasi experiences — temple trips, day tours, airport transfers.
        </div>

        <div style={styles.heroCtaRow}>
          <button
            style={styles.ctaPrimary}
            onMouseEnter={(e) => ((e.currentTarget.style.transform = "scale(1.05)"))}
            onMouseLeave={(e) => ((e.currentTarget.style.transform = "scale(1)"))}
            onClick={() => (window.location.href = "/book")}
          >
            Book Now
          </button>
          <button
            style={styles.ctaSecondary}
            onMouseEnter={(e) => ((e.currentTarget.style.boxShadow = "0 4px 12px rgba(251,146,60,0.3)"))}
            onMouseLeave={(e) => ((e.currentTarget.style.boxShadow = ""))}
            onClick={() => window.scrollTo({ top: 420, behavior: "smooth" })}
          >
            Explore Packages
          </button>
        </div>
      </section>

      <div style={styles.container}>
        {PACKAGES_LIST.map((pkg) => (
          <PackageCard key={pkg.slug} pkg={pkg} />
        ))}
      </div>
    </div>
  );
}
